# Automatically generated by systemd-sysv-generator

[Unit]
Documentation=man:systemd-sysv-generator(8)
SourcePath=/etc/init.d/icinga
Description=LSB: icinga host/service/network monitoring and management system
Before=multi-user.target
Before=multi-user.target
Before=multi-user.target
Before=graphical.target
After=remote-fs.target
After=nss-lookup.target
After=network-online.target
After=time-sync.target
Wants=network-online.target

[Service]
Type=forking
Restart=no
TimeoutSec=5min
IgnoreSIGPIPE=no
LimitNOFILE=4096
KillMode=process
GuessMainPID=no
RemainAfterExit=yes
SuccessExitStatus=5 6
ExecStart=/etc/init.d/icinga start
ExecStop=/etc/init.d/icinga stop

# An attempt at kludging a fix for how icinga's processing of external commands (e.g. downtimes,
# passive checks) seems to sometimes break after puppet restarts icinga.
# See also https://phabricator.wikimedia.org/T196336
ExecReload=-/usr/bin/killall -STOP nsca
ExecReload=/etc/init.d/icinga reload
ExecReload=-/usr/bin/killall -CONT nsca
